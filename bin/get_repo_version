#!/bin/bash

##
# Outputs "version" based on current tag or branch.

function main {
	local repoVersion

	if [ -f .version ]; then
		head -n1 .version
		return
	fi

	repoVersion=$(git describe --all --exact-match)

	# If there is no matching tag, then return branch name
	if [[ $repoVersion =~ ^heads ]]; then
		repoVersion=${repoVersion/heads\//}
	fi

	echo "$repoVersion"
}

main "$@"
